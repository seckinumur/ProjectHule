@model DAL.VM.VMStok
@{
    ViewBag.Title = "Satis";
    Layout = "~/Views/Shared/_LayoutPageUser.cshtml";
}
<div id="page-wrapper">
    <div class="row">
        <div class="row">
            <div class="col-lg-12">
                <h1 class="page-header">Satış Ekranı</h1>
            </div>
        </div>
        <div class="panel-body">
            <div class="row">

                <div class="col-lg-12">

                    <div class="form-group col-sm-2">
                        <label>Marka</label>
                        <select class="selectpicker form-control" data-live-search="true" name="Marka" id="marka" data-style="btn-primary">
                            @{
                                foreach (var item in Model.Markalar)
                                {
                                    <option data-tokens="@item.Marka">@item.Marka</option>
                                }
                            }
                        </select>
                    </div>

                    <div class="form-group col-sm-2">
                        <label>Model</label>
                        <select class="selectpicker form-control" data-live-search="true" name="Model" id="model" data-style="btn-info">
                            @{
                                foreach (var item in Model.Modeller)
                                {
                                    <option data-tokens="@item.Model">@item.Model</option>
                                }
                            }
                        </select>
                    </div>

                    <div class="form-group col-sm-2">
                        <label>Sınıf Kodu</label>
                        <select class="selectpicker form-control" id="SK" title="Sınıf Kodu" data-style="btn-warning"></select>
                    </div>

                    <div class="form-group col-sm-2">
                        <label>Sınıf Tanımı</label>
                        <select class="selectpicker form-control" id="ST" title="Sınıf Tanımı" name="ST" data-style="btn-danger"></select>
                    </div>

                    <div class="form-group col-sm-2">
                        <label>Detaylı Ara</label>
                        <button class="btn btn-warning col-md-12 form-control" data-toggle="collapse" data-target="#Detay" onclick="Arama()" aria-expanded="false" aria-controls="collapseExample">Detay</button>
                    </div>

                    <div class="form-group col-sm-2">
                        <label>Ürünü Bul</label>
                        <input hidden="hidden" value="0" id="DetayKontrol" />
                        <button onclick="BUL()" class="btn btn-success col-md-12 form-control">Bul</button>
                    </div>

                </div>
                <div class="col-lg-12 collapse" id="Detay">
                    <div class="panel panel-success">
                        <div class="panel-heading">
                            Detaylı Arama
                        </div>
                        <div class="panel-body">
                            <div class="form-group col-sm-2">
                                <label class="text-danger">Section 1</label>
                                <select class="selectpicker form-control" id="S1" title="Section 1"></select>
                            </div>
                            <div class="form-group col-sm-2">
                                <label class="text-danger">Section 2</label>
                                <select class="selectpicker form-control" id="S2" title="Section 2"></select>
                            </div>
                            <div class="form-group col-sm-2">
                                <label class="text-danger">Section 3</label>
                                <select class="selectpicker form-control" id="S3" title="Section 3"></select>
                            </div>
                            <div class="form-group col-sm-2">
                                <label class="text-danger">Section 4</label>
                                <select class="selectpicker form-control" id="S4" title="Section 4"></select>
                            </div>
                            <div class="form-group col-sm-2">
                                <label class="text-danger">Section 5</label>
                                <select class="selectpicker form-control" id="S5" title="Section 5"></select>
                            </div>
                            <div class="form-group col-sm-2">
                                <label class="text-danger">Section 6</label>
                                <select class="selectpicker form-control" id="S6" title="Section 6"></select>
                            </div>
                            <div class="form-group col-sm-2">
                                <label class="text-danger">Section 7</label>
                                <select class="selectpicker form-control" id="S7" title="Section 7"></select>
                            </div>
                            <div class="form-group col-sm-2">
                                <label class="text-danger">Section 8</label>
                                <select class="selectpicker form-control" id="S8" title="Section 8"></select>
                            </div>
                            <div class="form-group col-sm-2">
                                <label class="text-danger">Section 9</label>
                                <select class="selectpicker form-control" id="S9" title="Section 9"></select>
                            </div>
                            <div class="form-group col-sm-2">
                                <label class="text-danger">Section 10</label>
                                <select class="selectpicker form-control" id="S10" title="Section 10"></select>
                            </div>
                            <div class="form-group col-sm-2">
                                <label class="text-danger">Section 11</label>
                                <select class="selectpicker form-control" id="S11" title="Section 11"></select>
                            </div>
                            <div class="form-group col-sm-2">
                                <label class="text-danger">Section 12</label>
                                <select class="selectpicker form-control" id="S12" title="Section 12"></select>
                            </div>
                            <div class="form-group col-sm-2">
                                <label class="text-danger">Section 13</label>
                                <select class="selectpicker form-control" id="S13" title="Section 13"></select>
                            </div>
                            <div class="form-group col-sm-2">
                                <label class="text-danger">Section 14</label>
                                <select class="selectpicker form-control" id="S14" title="Section 14"></select>
                            </div>
                            <div class="form-group col-sm-2">
                                <label class="text-danger">Section 15</label>
                                <select class="selectpicker form-control" id="S15" title="Section 15"></select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <br />

            <div class="col-lg-12">
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        Arama Sonucu Listeleniyor. İlgili Ürünle Detay Görmek ve işlem Yapmak İçin Tıklayınız.
                    </div>
                    <div class="panel-body">
                        <table id="Tablo" class="table table-striped table-bordered table-hover" width="100%">
                            <thead>
                                <tr>
                                    <th>Marka</th>
                                    <th>Model</th>
                                    <th>Sınıf Kodu</th>
                                    <th>Sınıf Tanımı</th>
                                    <th>Malzeme Kodu</th>
                                    <th>Adet</th>
                                    <th>Fiyat</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                            </tbody>
                        </table>
                        <br />
                    </div>
                </div>
            </div>

            <br />

            <div class="col-sm-12">
                <ul class="nav nav-pills style2 nav-justified">
                    <li class="active">
                        <a href="#shopping-cart" data-toggle="tab">
                            1. Sepeti Kontrol Et
                            <div class="icon">
                                <i class="fa fa-check"></i>
                            </div>
                        </a>
                    </li>
                    <li >
                        <a href="#billing-info" data-toggle="tab">
                            2. Siparişi Onayla
                            <div class="icon">
                                <i class="fa fa-credit-card"></i>
                            </div>
                        </a>
                    </li>
                </ul>

                <div class="tab-content pills">
                    <div class="tab-pane active" id="shopping-cart">
                        <div class="panel panel-info">
                            <div class="panel-heading">
                                Sipariş Sepeti - Sipariş Sepetindeki Ürünler Otomatik Olarak Kaydedilir - Ürünlerle İlgili İşlem Yapmak İçin İlgili Ürüne Tıklayın.
                            </div>
                            <div class="panel-body">
                                <table id="TabloS" class="table table-striped table-bordered table-hover" width="100%">
                                    <thead>
                                        <tr>
                                            <th>Marka</th>
                                            <th>Model</th>
                                            <th>Sınıf Kodu</th>
                                            <th>Sınıf Tanımı</th>
                                            <th>Malzeme Kodu</th>
                                            <th>Adet</th>
                                            <th>Fiyat</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                        </tr>
                                    </tbody>
                                </table>
                                <br />
                               
                            </div>
                        </div>
                    </div>

                    <div class="tab-pane" id="billing-info">
                        <div class="panel panel-warning">
                            <div class="panel-heading">
                                Müşteri Bilgileri - Eğer Müşteri Sistemde Kayıtlıysa Burada Yaptığınız Değişikliklerle Güncellenir.
                            </div>
                            <div class="panel-body">
                                <form method="post">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="row">
                                                <div class="form-group col-sm-4">
                                                    <label class="text-primary">Müşteri Bul</label>
                                                    <select class="selectpicker form-control" id="MBA" title="Müşteri Ara"></select>
                                                </div>
                                                <div class="form-group col-sm-2">
                                                    <label class="text-primary">Ara</label>
                                                    <a href="#" class="btn btn-primary form-control" onclick="MusteriBul()">Ara</a>
                                                </div>
                                                <div class="col-sm-6">
                                                    <div class="form-group">
                                                        <label class="text-primary">Müşteri Adı Soyadı</label>
                                                        <input id="name" type="text" placeholder="Adı Soyadı" name="AdiSoyadi" class="form-control input-md" required>
                                                    </div>
                                                </div>
                                                <div class="col-sm-6">
                                                    <div class="form-group">
                                                        <label class="text-primary">Müşteri E-Mail</label>
                                                        <input id="email" type="text" placeholder="Email" name="MailAdresi" class="form-control input-md" required email>
                                                    </div>
                                                </div>
                                                <div class="col-sm-6">
                                                    <div class="form-group">
                                                        <label class="text-primary">Müşteri Telefonu</label>
                                                        <input id="phone" type="tel" placeholder="Telefon" name="Telefon" class="form-control input-md" required>
                                                    </div>
                                                </div>

                                                <div class="form-group col-sm-12">
                                                    <label class="text-primary">Müşteri Adresi</label>
                                                    <input id="address" type="text" placeholder="Adres" name="Adres" class="form-control input-md" required>
                                                </div>
                                                <div class="form-group col-sm-12">
                                                    <label class="text-primary">Sipariş Notu</label>
                                                    <div class="form-group">
                                                        <textarea rows="2" class="form-control" name="not" id="notkismi" placeholder="Sipariş Notu">not</textarea>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>

                                        <div class="col-md-6">
                                            <div class="panel-body">
                                                <div class="form-group">
                                                    <div class="col-sm-12">
                                                        <div class="table-responsive">
                                                            <table class="table no-border">
                                                                <tr>
                                                                    <th>Sipariş Tarihi</th>
                                                                    <td>@DateTime.Now.ToShortDateString()</td>
                                                                </tr>
                                                                <tr>
                                                                    <th>Toplam Ürün</th>
                                                                    <td id="toplamurun">Ürün Yok</td>
                                                                </tr>
                                                                <tr>
                                                                    <th>Toplam Fiyat</th>
                                                                    <td ><input id="toplamfiyat" name="ToplamFiyat" readonly="readonly" /> €</td>
                                                                </tr>
                                                                <tr>
                                                                    <th>İndirimli Fiyatı</th>
                                                                    <td><input id="IndirimliFiyatia" name="IndirimliFiyat" readonly="readonly" /> €</td>
                                                                </tr>
                                                                <tr>
                                                                    <th>Yapılan İndirim</th>
                                                                    <td id="YapilanIndirimO">0.00 €</td>
                                                                </tr>
                                                                <tr>
                                                                    <th>% Toplam İndirim Oranı</th>
                                                                    <td><input type="number" min="0" max="100" value="0" maxlength="3" size="3" id="IndirimUygulaFiyat"/> % <a class="btn btn-info" onclick="IndirimUygula()">İndirimi Uygula</a></td>
                                                                </tr>
                                                                <tr>
                                                                    <th>€ Toplam İndirim Oranı</th>
                                                                    <td><input value="0" size="3" id="IndirimUygulaFiyate" /> € <a class="btn btn-warning" onclick="IndirimUygulae()">İndirimi Uygula</a></td>
                                                                </tr>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                                <input name="UyelerID" value="" hidden="hidden">
                                                <input name="Gorev" value="Gonder" hidden="hidden">
                                                <div class="form-group col-sm-6">
                                                        <a href="~/User/SiparisIptal" class="btn btn-danger btn-block" type="submit">Siparişi İptal Et</a>
                                                </div>
                                                <div class="form-group col-sm-6">
                                                    <button class="btn btn-success btn-block" type="submit">Siparişi Şimdi Tamamla</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>

                </div>

            </div>

        </div>
    </div>
</div>

<div class="modal fade" id="Bak" tabindex="-1" role="dialog" aria-labelledby="DuzenleLabel" aria-hidden="true" style="display: none;">
    <div class="modal-title">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="DuzenleLabel">Ürün Bilgisi</h4>
            </div>
            <div class="modal-body">
                <div class="form-group col-md-3">
                    <label>Marka Adı</label>
                    <input class="form-control" id="marka1" readonly="readonly">
                </div>
                <div class="form-group col-md-3">
                    <label>Model Adı</label>
                    <input class="form-control" id="model1" readonly="readonly">
                </div>
                <div class="form-group col-md-3">
                    <label>Sınıf Kodu</label>
                    <input class="form-control" id="SinifKodu1" readonly="readonly">
                </div>
                <div class="form-group col-md-3">
                    <label>Sınıf Tanımı</label>
                    <input class="form-control" id="SinifTanimi1" readonly="readonly">
                </div>
                <div class="form-group col-md-2">
                    <label>Malzeme Kodu</label>
                    <input class="form-control" id="malzemekodu1" readonly="readonly">
                </div>
                <div class="form-group col-md-2">
                    <label>Stok Adedi</label>
                    <input type="number" class="form-control" id="Stok" min="0" readonly="readonly">
                </div>
                <div class="form-group col-md-2">
                    <label>Ürün Fiyatı</label>
                    <input type="number" class="form-control" id="Fiyat" min="0" value="1" required>
                </div>
                <div class="form-group col-md-2">
                    <label>Eklencek Adet</label>
                    <input type="number" class="form-control" id="AdetEkle" min="1" value="1" required>
                </div>
                <div class="form-group col-md-2">
                    <label>Sepete Ekle</label>
                    <button class="btn btn-success form-control" onclick="sepetEkle()"><i class="fa fa-cart-plus"> Sepete Ekle</i></button>
                </div>
                <div class="form-group col-md-2">
                    <label>Pencereyi Kapat</label>
                    <button type="button" class="btn btn-danger form-control" data-dismiss="modal">Kapat</button>
                </div>
                <div class="form-group">
                    <iframe class="col-xs-12" frameborder="0" style="height:500px" id="Bura"></iframe>
                </div>
            </div>
            <div class="modal-footer">
                <h5 class="text-info">Project Hule V.1.5 Tanı Aracı.</h5>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="BakS" tabindex="-1" role="dialog" aria-labelledby="DuzenleLabel" aria-hidden="true" style="display: none;">
    <div class="modal-title">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="DuzenleLabel">Ürün Bilgisi</h4>
            </div>
            <div class="modal-body">
                <div class="form-group col-md-2">
                    <label>Marka Adı</label>
                    <input class="form-control" id="marka2" readonly="readonly">
                </div>
                <div class="form-group col-md-2">
                    <label>Model Adı</label>
                    <input class="form-control" id="model2" readonly="readonly">
                </div>
                <div class="form-group col-md-3">
                    <label>Sınıf Kodu</label>
                    <input class="form-control" id="SinifKodu2" readonly="readonly">
                </div>
                <div class="form-group col-md-3">
                    <label>Sınıf Tanımı</label>
                    <input class="form-control" id="SinifTanimi2" readonly="readonly">
                </div>
                <div class="form-group col-md-2">
                    <label>Malzeme Kodu</label>
                    <input class="form-control" id="malzemekodu2" readonly="readonly">
                </div>
                <div class="form-group col-md-2">
                    <label>Ürün Fiyatı</label>
                    <input type="number" class="form-control" id="Fiyat1" min="0" value="1" required>
                </div>
                <div class="form-group col-md-2">
                    <label>Adet</label>
                    <input type="number" class="form-control" id="AdetEkle1" min="1" value="1" required>
                </div>
                <div class="form-group col-md-3">
                    <label>Ürünü Güncelle</label>
                    <button class="btn btn-success form-control" onclick="GuncelleSepet()"><i class="fa fa-cart-plus"> Kaydet</i></button>
                </div>
                <div class="form-group col-md-3">
                    <label>Sepetten Çıkar</label>
                    <button class="btn btn-danger form-control" onclick="SilSepet()"><i class="fa fa-times-circle"> Çıkar</i></button>
                </div>
                <div class="form-group col-md-2">
                    <label>Pencereyi Kapat</label>
                    <button type="button" class="btn btn-info form-control" data-dismiss="modal">Kapat</button>
                </div>
                <div class="form-group">
                    <iframe class="col-xs-12" frameborder="0" style="height:500px" id="Bura1"></iframe>
                </div>
            </div>
            <div class="modal-footer">
                <h5 class="text-info">Project Hule V.1.5 Tanı Aracı.</h5>
            </div>
        </div>
    </div>
</div>



<script type="text/javascript">
    $(document).ready(function () {
        GenelIslem();
        ToplamiAl();
    });

    function ToplamiAl() {

        $.ajax({
            type: 'GET',
            url: '/User/ToplamAjax',
            contentType: 'application/json',
            success: function (data) {
                document.getElementById("toplamurun").innerHTML = data.ToplamAdet;
                document.getElementById("toplamfiyat").value = data.ToplamFiyat;
            }
        });
    };

    function IndirimUygula() {
        var toplamff = document.getElementById("toplamfiyat").value;
        var Indirimm = document.getElementById("IndirimUygulaFiyat").value;
        if (Indirimm != 0) {
            document.getElementById("IndirimliFiyatia").value = toplamff - (toplamff * Indirimm / 100);
            document.getElementById("YapilanIndirimO").innerHTML = toplamff * Indirimm / 100 + " €";
        }
        else {
            document.getElementById("IndirimliFiyatia").value = 0.00;
            document.getElementById("YapilanIndirimO").innerHTML = "0.00 €";
        }
    };

    function IndirimUygulae() {
        var toplamff = document.getElementById("toplamfiyat").value;
        var Indirimm = document.getElementById("IndirimUygulaFiyate").value;
        if (Indirimm != 0) {
            document.getElementById("IndirimliFiyatia").value = toplamff -  Indirimm;
            document.getElementById("YapilanIndirimO").innerHTML =  Indirimm  + " €";
        }
        else {
            document.getElementById("IndirimliFiyatia").value = 0.00;
            document.getElementById("YapilanIndirimO").innerHTML = "0.00 €";
        }
    };

    function GenelIslem() {
        $.ajax({
            type: 'GET',
            url: '/User/SepetKontrol',
            contentType: 'application/json',
            success: function (data) {
                var Tablo = $('#TabloS').DataTable({
                    data: data,
                    columns: [
                        { data: 'Marka' },
                        { data: 'Model' },
                        { data: 'SinifKodu' },
                        { data: 'SinifTanimi' },
                        { data: 'MalzemeKodu' },
                        { data: 'Adet' },
                        { data: 'Fiyat' }
                    ],
                    select: true,
                    lengthChange: false,
                    dom: 'Bfrtip',
                    buttons: ['copy', 'excel', 'pdf', 'print'],
                    responsive: true,
                    destroy: true
                });
                document.getElementById("toplamurun").innerHTML = data.ToplamAdet;
                document.getElementById("toplamfiyat").innerHTML = data.ToplamFiyat;
                Tablo.on('select', function (e, dt, type, indexes) {
                    var rowData1 = Tablo.rows({ selected: true }).data();
                    document.getElementById("marka2").value = rowData1[0].Marka;
                    document.getElementById("model2").value = rowData1[0].Model;
                    document.getElementById("malzemekodu2").value = rowData1[0].MalzemeKodu;
                    document.getElementById("SinifKodu2").value = rowData1[0].SinifKodu;
                    document.getElementById("SinifTanimi2").value = rowData1[0].SinifTanimi;
                    document.getElementById("AdetEkle1").value = rowData1[0].Adet;
                    document.getElementById("Fiyat1").value = rowData1[0].Fiyat;
                    document.getElementById("Bura1").src = "http://sapservices.boydak.net/fabric/material/" + rowData1[0].MalzemeKodu;
                    $('#BakS').modal('show');
                });
            }
        });
    };

    function Arama() {
        var anahtar = document.getElementById("DetayKontrol").value;
        if (anahtar == 0) {
            document.getElementById("DetayKontrol").value = 1;
        }
        else {
            document.getElementById("DetayKontrol").value = 0;
        }
    };
    function BUL() {

        var Marka = $('#marka').selectpicker('val');
        var Model = $('#model').selectpicker('val');
        var SinifKodu = $('#SK').selectpicker().find("option:selected").text();
        var SinifTanimi = $('#ST').selectpicker().find("option:selected").text();
        var detay = document.getElementById("DetayKontrol").value;

        if (detay == 0) {
            var Veri = JSON.stringify({
                'Marka': Marka,
                'Model': Model,
                'SinifKodu': SinifKodu,
                'SinifTanimi': SinifTanimi,
                'Detay': detay
            });
        }
        else {
            var Veri = JSON.stringify({
                'Marka': Marka,
                'Model': Model,
                'SinifKodu': SinifKodu,
                'SinifTanimi': SinifTanimi,
                'Detay': detay,
                'Section1': $('#S1').selectpicker().find("option:selected").text(),
                'Section2': $('#S2').selectpicker().find("option:selected").text(),
                'Section3': $('#S3').selectpicker().find("option:selected").text(),
                'Section4': $('#S4').selectpicker().find("option:selected").text(),
                'Section5': $('#S5').selectpicker().find("option:selected").text(),
                'Section6': $('#S6').selectpicker().find("option:selected").text(),
                'Section7': $('#S7').selectpicker().find("option:selected").text(),
                'Section8': $('#S8').selectpicker().find("option:selected").text(),
                'Section9': $('#S9').selectpicker().find("option:selected").text(),
                'Section10': $('#S10').selectpicker().find("option:selected").text(),
                'Section11': $('#S11').selectpicker().find("option:selected").text(),
                'Section12': $('#S12').selectpicker().find("option:selected").text(),
                'Section13': $('#S13').selectpicker().find("option:selected").text(),
                'Section14': $('#S14').selectpicker().find("option:selected").text(),
                'Section15': $('#S15').selectpicker().find("option:selected").text()
            });
        };

        $.ajax({
            type: 'POST',
            url: '/User/UrunBul/',
            data: Veri,
            contentType: 'application/json',
            success: function (data) {
                var table = $('#Tablo').DataTable({
                    data: data,
                    columns: [
                        { data: 'Marka' },
                        { data: 'Model' },
                        { data: 'SinifKodu' },
                        { data: 'SinifTanimi' },
                        { data: 'MalzemeKodu' },
                        { data: 'Stok' },
                        { data: 'Fiyat' }
                    ],
                    select: true,
                    lengthChange: false,
                    dom: 'Bfrtip',
                    buttons: ['copy', 'excel', 'pdf', 'print'],
                    responsive: true,
                    destroy: true
                });
                table
                    .on('select', function (e, dt, type, indexes) {
                        var rowData = table.rows({ selected: true }).data();
                        document.getElementById("marka1").value = rowData[0].Marka;
                        document.getElementById("model1").value = rowData[0].Model;
                        document.getElementById("malzemekodu1").value = rowData[0].MalzemeKodu;
                        document.getElementById("SinifKodu1").value = rowData[0].SinifKodu;
                        document.getElementById("SinifTanimi1").value = rowData[0].SinifTanimi;
                        document.getElementById("Stok").value = rowData[0].Stok;
                        document.getElementById("Fiyat").value = rowData[0].Fiyat;
                        document.getElementById("Bura").src = "http://sapservices.boydak.net/fabric/material/" + rowData[0].MalzemeKodu;
                        $('#Bak').modal('show');
                    });
            },
        });
    };

    function sepetEkle() {

        var adet = JSON.stringify({
            'Adet': document.getElementById("AdetEkle").value,
            'Fiyat': document.getElementById("Fiyat").value,
            'Malzemekodu': document.getElementById("malzemekodu1").value
        });

        $.ajax({
            type: 'POST',
            url: '/User/sepetekle',
            data: adet,
            contentType: 'application/json',
            success: function (response) {
                $('#Bak').modal('toggle');
                GenelIslem();
                ToplamiAl();
                if (response != null && response.success) {
                    $.notify({
                        icon: 'fa fa-check-circle',
                        message: response.responseText,
                    }, {
                            type: 'success',
                            placement: {
                                from: 'top',
                                align: 'center'
                            },
                            delay: 1500
                        });
                } else {
                    $.notify({
                        icon: 'fa fa-exclamation-triangle',
                        message: response.responseText,
                    }, {
                            type: 'danger',
                            placement: {
                                from: 'top',
                                align: 'center'
                            },
                            delay: 1500
                        });
                }
            },
            error: function (response) {
                $.notify({
                    icon: 'fa fa-exclamation-triangle',
                    message: 'Sunucuyla İletişim Kurulamadı!',
                }, {
                        type: 'danger',
                        placement: {
                            from: 'top',
                            align: 'center'
                        },
                        delay: 1500
                    });
            }
        });
    };

    function GuncelleSepet() {
        var adet = JSON.stringify({
            'Adet': document.getElementById("AdetEkle1").value,
            'Fiyat': document.getElementById("Fiyat1").value,
            'Malzemekodu': document.getElementById("malzemekodu2").value
        });

        $.ajax({
            type: 'POST',
            url: '/User/UrunSepetGuncelle',
            data: adet,
            contentType: 'application/json',
            success: function (response) {
                $('#BakS').modal('toggle');
                GenelIslem();
                ToplamiAl();
                if (response != null && response.success) {
                    $.notify({
                        icon: 'fa fa-check-circle',
                        message: response.responseText,
                    }, {
                            type: 'success',
                            placement: {
                                from: 'top',
                                align: 'center'
                            },
                            delay: 1500
                        });
                } else {
                    $.notify({
                        icon: 'fa fa-exclamation-triangle',
                        message: response.responseText,
                    }, {
                            type: 'danger',
                            placement: {
                                from: 'top',
                                align: 'center'
                            },
                            delay: 1500
                        });
                }
            },
            error: function (response) {
                $.notify({
                    icon: 'fa fa-exclamation-triangle',
                    message: 'Sunucuyla İletişim Kurulamadı!',
                }, {
                        type: 'danger',
                        placement: {
                            from: 'top',
                            align: 'center'
                        },
                        delay: 1500
                    });
            }
        });
    }

    function SilSepet() {
        var adet = JSON.stringify({
            'Adet': document.getElementById("AdetEkle1").value,
            'Fiyat': document.getElementById("Fiyat1").value,
            'Malzemekodu': document.getElementById("malzemekodu2").value
        });

        $.ajax({
            type: 'POST',
            url: '/User/UrunSepetCikar',
            data: adet,
            contentType: 'application/json',
            success: function (response) {
                $('#BakS').modal('toggle');
                GenelIslem();
                ToplamiAl();
                if (response != null && response.success) {
                    $.notify({
                        icon: 'fa fa-check-circle',
                        message: response.responseText,
                    }, {
                            type: 'success',
                            placement: {
                                from: 'top',
                                align: 'center'
                            },
                            delay: 1500
                        });
                } else {
                    $.notify({
                        icon: 'fa fa-exclamation-triangle',
                        message: response.responseText,
                    }, {
                            type: 'danger',
                            placement: {
                                from: 'top',
                                align: 'center'
                            },
                            delay: 1500
                        });
                }
            },
            error: function (response) {
                $.notify({
                    icon: 'fa fa-exclamation-triangle',
                    message: 'Sunucuyla İletişim Kurulamadı!',
                }, {
                        type: 'danger',
                        placement: {
                            from: 'top',
                            align: 'center'
                        },
                        delay: 1500
                    });
            }
        });
    };

    function MusteriBul() {
        var Veri = JSON.stringify({
            'name': $('#MBA').selectpicker().find("option:selected").text()
        });

        $.ajax({
            type: 'POST',
            url: '/User/MusteriBul/',
            data: Veri,
            contentType: 'application/json',
            success: function (data) {
                document.getElementById("name").value = data.AdiSoyadi;
                document.getElementById("phone").value = data.Telefon;
                document.getElementById("address").value = data.Adres;
                document.getElementById("email").value = data.MailAdresi;
                document.getElementById("notkismi").innerHTML = data.Not;
            },
            error: function (response) {
            }
        });
    };
</script>